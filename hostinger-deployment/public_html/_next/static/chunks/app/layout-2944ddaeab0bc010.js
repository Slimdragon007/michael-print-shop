(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1168:(e,s,a)=>{"use strict";a.d(s,{AuthProvider:()=>i});var t=a(5155),l=a(2115),r=a(6382);function i(e){let{children:s}=e,{initialize:a}=(0,r.n)();return(0,l.useEffect)(()=>{a()},[a]),(0,t.jsx)(t.Fragment,{children:s})}},4400:(e,s,a)=>{Promise.resolve().then(a.bind(a,1168)),Promise.resolve().then(a.bind(a,6199)),Promise.resolve().then(a.t.bind(a,6874,23)),Promise.resolve().then(a.t.bind(a,45,23)),Promise.resolve().then(a.t.bind(a,9324,23))},6199:(e,s,a)=>{"use strict";a.d(s,{Header:()=>E});var t=a(5155),l=a(6874),r=a.n(l),i=a(2115),n=a(7924),c=a(1007),d=a(6151),o=a(381),m=a(4835),h=a(4783),x=a(1853),u=a(6382),j=a(4446),f=a(7168),p=a(9852),g=a(7809),N=a(4416),v=a(5452),b=a(6766),w=a(7712),y=a(4616),_=a(8145),C=a(3999);function k(e){let{item:s,onUpdateQuantity:a,onRemove:l}=e,r=e=>{e<1?l():a(e)};return(0,t.jsxs)("div",{className:"flex gap-4 py-4 border-b border-border last:border-b-0",children:[(0,t.jsx)("div",{className:"relative w-20 h-20 flex-shrink-0 rounded-md overflow-hidden",children:(0,t.jsx)(b.default,{src:s.product.image_url,alt:s.product.title,fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-medium text-sm line-clamp-2 mb-1",children:s.product.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(_.E,{variant:"outline",className:"text-xs",children:s.print_option.material}),(0,t.jsx)(_.E,{variant:"outline",className:"text-xs",children:s.print_option.size})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(f.$,{size:"icon",variant:"outline",className:"h-8 w-8",onClick:()=>r(s.quantity-1),children:(0,t.jsx)(w.A,{className:"h-3 w-3"})}),(0,t.jsx)("span",{className:"w-8 text-center text-sm font-medium",children:s.quantity}),(0,t.jsx)(f.$,{size:"icon",variant:"outline",className:"h-8 w-8",onClick:()=>r(s.quantity+1),children:(0,t.jsx)(y.A,{className:"h-3 w-3"})})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-semibold",children:(0,C.$g)(s.total_price)}),s.quantity>1&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,C.$g)(s.total_price/s.quantity)," each"]})]})]})]}),(0,t.jsx)(f.$,{size:"icon",variant:"ghost",className:"h-8 w-8 flex-shrink-0",onClick:l,children:(0,t.jsx)(N.A,{className:"h-4 w-4"})})]})}var A=a(8482);function S(e){let{cart:s,showCheckoutButton:a=!0,className:l=""}=e,i=.08*s.total,n=s.total+0+i;return 0===s.items.length?(0,t.jsx)(A.Zp,{className:l,children:(0,t.jsxs)(A.Wu,{className:"flex flex-col items-center justify-center py-8",children:[(0,t.jsx)(d.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Your cart is empty"}),(0,t.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:"Add some beautiful prints to get started"}),(0,t.jsx)(f.$,{asChild:!0,children:(0,t.jsx)(r(),{href:"/products",children:"Shop Now"})})]})}):(0,t.jsxs)(A.Zp,{className:l,children:[(0,t.jsx)(A.aR,{children:(0,t.jsxs)(A.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(d.A,{className:"h-5 w-5"}),"Order Summary"]})}),(0,t.jsxs)(A.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{children:["Items (",s.item_count,")"]}),(0,t.jsx)("span",{children:(0,C.$g)(s.total)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Shipping"}),(0,t.jsx)("span",{children:"Free"})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Tax"}),(0,t.jsx)("span",{children:(0,C.$g)(i)})]}),(0,t.jsx)("div",{className:"border-t pt-2",children:(0,t.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsx)("span",{children:(0,C.$g)(n)})]})})]}),(0,t.jsxs)("div",{className:"bg-muted/50 p-3 rounded-md text-sm",children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Estimated Delivery"}),(0,t.jsx)("div",{className:"text-muted-foreground",children:"5-7 business days for standard prints"})]})]}),a&&(0,t.jsx)(A.wL,{className:"pt-0",children:(0,t.jsx)(f.$,{className:"w-full",size:"lg",asChild:!0,children:(0,t.jsx)(r(),{href:"/checkout",children:"Proceed to Checkout"})})})]})}function $(e){let{children:s}=e,[a,l]=(0,i.useState)(!1),{cart:r,updateQuantity:n,removeItem:c}=(0,j.x)(),d=s||(0,t.jsxs)(f.$,{variant:"outline",size:"icon",className:"relative",children:[(0,t.jsx)(g.A,{className:"h-4 w-4"}),r.item_count>0&&(0,t.jsx)(_.E,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center text-xs p-0",children:r.item_count})]});return(0,t.jsxs)(v.bL,{open:a,onOpenChange:l,children:[(0,t.jsx)(v.l9,{asChild:!0,children:d}),(0,t.jsxs)(v.ZL,{children:[(0,t.jsx)(v.hJ,{className:"fixed inset-0 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),(0,t.jsx)(v.UC,{className:"fixed right-0 top-0 h-full w-full max-w-md border-l bg-background shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right duration-300",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"h-5 w-5"}),(0,t.jsx)("h2",{className:"font-semibold",children:"Shopping Cart"}),r.item_count>0&&(0,t.jsxs)(_.E,{variant:"secondary",children:[r.item_count," ",1===r.item_count?"item":"items"]})]}),(0,t.jsx)(v.bm,{asChild:!0,children:(0,t.jsx)(f.$,{variant:"ghost",size:"icon",children:(0,t.jsx)(N.A,{className:"h-4 w-4"})})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col",children:0===r.items.length?(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(g.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Your cart is empty"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm mb-4",children:"Add some beautiful prints to get started"}),(0,t.jsx)(v.bm,{asChild:!0,children:(0,t.jsx)(f.$,{children:"Continue Shopping"})})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,t.jsx)("div",{className:"space-y-0",children:r.items.map((e,s)=>(0,t.jsx)(k,{item:e,onUpdateQuantity:e=>n(s,e),onRemove:()=>c(s)},"".concat(e.product.id,"-").concat(e.print_option.id)))})}),(0,t.jsx)("div",{className:"border-t p-4",children:(0,t.jsx)(S,{cart:r,className:"border-0 shadow-none"})})]})})]})})]})]})}function E(){let[e,s]=(0,i.useState)(""),[a,l]=(0,i.useState)(!1),{user:g,signOut:N,loading:v}=(0,u.n)(),{cart:b}=(0,j.x)(),w=s=>{s.preventDefault(),e.trim()&&(window.location.href="/products?search=".concat(encodeURIComponent(e.trim())))},y=async()=>{try{await N()}catch(e){console.error("Error signing out:",e)}};return(0,t.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,t.jsxs)(r(),{href:"/",className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary"}),(0,t.jsx)("span",{className:"font-bold text-xl",children:"PrintShop"})]}),(0,t.jsx)("div",{className:"hidden md:flex flex-1 max-w-lg mx-8",children:(0,t.jsxs)("form",{onSubmit:w,className:"relative w-full",children:[(0,t.jsx)(n.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(p.p,{placeholder:"Search for prints...",value:e,onChange:e=>s(e.target.value),className:"pl-10 pr-4"})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(f.$,{variant:"ghost",size:"icon",className:"md:hidden",children:(0,t.jsx)(n.A,{className:"h-4 w-4"})}),(0,t.jsx)($,{}),!v&&(0,t.jsx)(t.Fragment,{children:g?(0,t.jsxs)(x.bL,{children:[(0,t.jsx)(x.l9,{asChild:!0,children:(0,t.jsx)(f.$,{variant:"ghost",size:"icon",children:(0,t.jsx)(c.A,{className:"h-4 w-4"})})}),(0,t.jsx)(x.ZL,{children:(0,t.jsxs)(x.UC,{className:"min-w-[200px] bg-background border rounded-md shadow-md p-1",sideOffset:5,children:[(0,t.jsx)("div",{className:"px-2 py-1.5 text-sm font-medium border-b mb-1",children:g.full_name||g.email}),(0,t.jsx)(x.q7,{asChild:!0,children:(0,t.jsxs)(r(),{href:"/account",className:"flex items-center gap-2 px-2 py-1.5 text-sm hover:bg-accent rounded cursor-pointer",children:[(0,t.jsx)(c.A,{className:"h-4 w-4"}),"My Account"]})}),(0,t.jsx)(x.q7,{asChild:!0,children:(0,t.jsxs)(r(),{href:"/orders",className:"flex items-center gap-2 px-2 py-1.5 text-sm hover:bg-accent rounded cursor-pointer",children:[(0,t.jsx)(d.A,{className:"h-4 w-4"}),"My Orders"]})}),"admin"===g.role&&(0,t.jsx)(x.q7,{asChild:!0,children:(0,t.jsxs)(r(),{href:"/admin",className:"flex items-center gap-2 px-2 py-1.5 text-sm hover:bg-accent rounded cursor-pointer",children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),"Admin Panel"]})}),(0,t.jsx)(x.wv,{className:"h-px bg-border my-1"}),(0,t.jsxs)(x.q7,{onSelect:y,className:"flex items-center gap-2 px-2 py-1.5 text-sm hover:bg-accent rounded cursor-pointer text-destructive",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),"Sign Out"]})]})})]}):(0,t.jsx)(f.$,{asChild:!0,variant:"outline",children:(0,t.jsx)(r(),{href:"/auth",children:"Sign In"})})}),(0,t.jsx)(f.$,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>l(!a),children:(0,t.jsx)(h.A,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("div",{className:"md:hidden py-4 border-t",children:(0,t.jsxs)("form",{onSubmit:w,className:"relative",children:[(0,t.jsx)(n.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(p.p,{placeholder:"Search for prints...",value:e,onChange:e=>s(e.target.value),className:"pl-10 pr-4"})]})}),a&&(0,t.jsx)("div",{className:"md:hidden py-4 border-t",children:(0,t.jsxs)("nav",{className:"space-y-2",children:[(0,t.jsx)(r(),{href:"/products",className:"block px-3 py-2 text-sm hover:bg-accent rounded",onClick:()=>l(!1),children:"All Products"}),(0,t.jsx)(r(),{href:"/categories",className:"block px-3 py-2 text-sm hover:bg-accent rounded",onClick:()=>l(!1),children:"Categories"}),g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r(),{href:"/account",className:"block px-3 py-2 text-sm hover:bg-accent rounded",onClick:()=>l(!1),children:"My Account"}),(0,t.jsx)(r(),{href:"/orders",className:"block px-3 py-2 text-sm hover:bg-accent rounded",onClick:()=>l(!1),children:"My Orders"})]})]})})]})})}},6382:(e,s,a)=>{"use strict";a.d(s,{n:()=>i});var t=a(5453),l=a(6786),r=a(6414);let i=(0,t.v)()((0,l.Zr)((e,s)=>({user:null,loading:!0,initialize:async()=>{try{e({loading:!0});let{data:{session:t},error:l}=await r.N.auth.getSession();if(l){console.error("Error getting session:",l),e({user:null,loading:!1});return}if(null==t?void 0:t.user){var s,a;let{data:l,error:i}=await r.N.from("user_profiles").select("*").eq("id",t.user.id).single();if(i){console.error("Error fetching user profile:",i),e({user:null,loading:!1});return}let n={id:t.user.id,email:t.user.email||"",full_name:(null==l?void 0:l.full_name)||(null==(s=t.user.user_metadata)?void 0:s.full_name)||"",avatar_url:(null==l?void 0:l.avatar_url)||(null==(a=t.user.user_metadata)?void 0:a.avatar_url)||"",role:(null==l?void 0:l.role)||"customer",created_at:t.user.created_at};e({user:n,loading:!1})}else e({user:null,loading:!1});r.N.auth.onAuthStateChange(async(s,a)=>{if("SIGNED_IN"===s&&(null==a?void 0:a.user)){var t,l;let{data:s}=await r.N.from("user_profiles").select("*").eq("id",a.user.id).single(),i={id:a.user.id,email:a.user.email||"",full_name:(null==s?void 0:s.full_name)||(null==(t=a.user.user_metadata)?void 0:t.full_name)||"",avatar_url:(null==s?void 0:s.avatar_url)||(null==(l=a.user.user_metadata)?void 0:l.avatar_url)||"",role:(null==s?void 0:s.role)||"customer",created_at:a.user.created_at};e({user:i,loading:!1})}else"SIGNED_OUT"===s&&e({user:null,loading:!1})})}catch(s){console.error("Error initializing auth:",s),e({user:null,loading:!1})}},signIn:async(s,a)=>{try{e({loading:!0});let{data:t,error:l}=await r.N.auth.signInWithPassword({email:s,password:a});if(l)throw e({loading:!1}),l}catch(s){throw e({loading:!1}),s}},signUp:async(s,a,t)=>{try{e({loading:!0});let{data:l,error:i}=await r.N.auth.signUp({email:s,password:a,options:{data:{full_name:t}}});if(i)throw e({loading:!1}),i;e({loading:!1})}catch(s){throw e({loading:!1}),s}},signOut:async()=>{try{e({loading:!0});let{error:s}=await r.N.auth.signOut();if(s)throw e({loading:!1}),s}catch(s){throw e({loading:!1}),s}}}),{name:"auth-store",partialize:e=>({user:e.user})}))},9324:()=>{}},e=>{e.O(0,[620,121,76,358],()=>e(e.s=4400)),_N_E=e.O()}]);